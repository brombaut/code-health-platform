<!DOCTYPE html>
<meta charset="utf-8">
<body>
<!-- <script src="//d3js.org/d3.v5.min.js"></script>
<script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script>
<script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script> -->
<script src="d3.v5.min.js"></script>
<script src="index.min.js" type="javascript/worker"></script>
<script src="d3-graphviz.js" type="application/javascript"></script>
<div id="graph"></div>
<script type="module" src="garbage.js"></script>
<style>
html,
body {
    height: 100%;
}
#graph {
    text-align: center;
    width: 100%;
    height: 100%;
}
</style>
<script>
// import * as enc_diagram_json from './enclosure_diagram.json';
// // var enc_diagram_json = require('./enclosure_diagram.json'); //with path
// console.log(enc_diagram_json);


// var selected = null; // Start root as nothing (i.e., at the top of the project directory)
// var structure = {
//     name: "root",
//     children: [
//         {
//             name: "A",
//             children: [
//                 {
//                     name: "AB",
//                     children: [
//                         {
//                             name: "ABA",
//                             children: []
//                         }
//                     ],
//                 },
//                 {
//                     name: "AC",
//                     children: [],
//                 },
//             ]
//         },
//         {
//             name: "B",
//             children: [
//                 {
//                     name: "BB",
//                     children: [],
//                 },
//                 {
//                     name: "BC",
//                     children: [],
//                     size: 1,
//                 },
//             ]
//         },
//         {
//             name: "X",
//             children: [],
//         },
//     ]
// };

// var dependencies = {
//     X: ["ABA"],
//     ABA: ["AC", "BC", "BB"],
// };

// function generatedDigraph(structure, dependencies, selected) {

//     function addChild(child) {
//         return child.children.length == 0 ? 
//             generateNode(child) : 
//             generateSubGraph(child);
//     }

//     function generateNode(leafNode) {
//         var nodeColor = selected == leafNode.name ? "yellow" : "lightgrey";
//         var nodeWidth = leafNode.size ? leafNode.size : 0.5;
//         return `${leafNode.name}[style=filled,shape=circle,width=${nodeWidth},color=${nodeColor}];\n`;
//     }

//     function generateSubGraph(root) {
//         var result = `
//             subgraph cluster_${root.name} {
//                 style=rounded;
//                 label="${root.name}";
//                 ${root.children.map(addChild).join("")}
//             };
//         `;
//         return result;
//     }

//     function generateDependencies(dependencies) {
//         var result = '';
//         for (var [key, value] of Object.entries(dependencies)) {
//             for (var v of value) {
//                 // Show all of the selected nodes dependencies
//                 // and all of the dependents of the selected node
//                 if (selected == key || selected == v) {
//                     result += `${key}->${v};`;
//                 } else {
//                     result += `${key}->${v}[style=invis];`;
//                 }
//             }
//         }
//         return result;
//     }

//     var result = `digraph G {
//         ${generateSubGraph(structure)}
//         ${generateDependencies(dependencies)}
//     }`
//     return result;
// }

// var graphEl = document.querySelector("#graph");

// var graphviz = d3.select("#graph")
//     .graphviz()
//     .width(graphEl.getBoundingClientRect().width)
//     .height(graphEl.getBoundingClientRect().height)
//     .transition(function () {
//         return d3.transition("main")
//             .ease(d3.easeLinear)
//             .delay(0)
//             .duration(100);
//     })
//     .logEvents(false)
//     .on("initEnd", render)
//     .on('end', setNodeClickListeners);

// function render() {
//     var dot = generatedDigraph(structure, dependencies, selected);
//     graphviz.renderDot(dot)
//         // .on('end', setNodeClickListeners);
// }


// function setNodeClickListeners() {
//     var nodes = d3.selectAll(d3.select("#graph").node().querySelectorAll(".node"));
//     nodes.on("click", function (d) {
//         selected = d.key;
//         render();
//     });
// }


</script>